# ì¥ì¤‘ í…ŒìŠ¤íŠ¸í•  ê²½ìš° ì¢…ê°€ê°€ ì•„ë‹Œ ì‹œê°€ê°€ ì €ì¥ë¨, ê°•ì œë¡œ ìµœì‹ ì¼ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ëŠ” íŒŒì¼ì„

name: Delete dates from stock workbook

on:
  # âœ… GitHub ì›¹ UIì—ì„œ ìˆ˜ë™ ì‹¤í–‰
  workflow_dispatch:

  # (ì„ íƒ) íŠ¹ì • ì‹œê°„ì— ìë™ ì‹¤í–‰í•˜ê³  ì‹¶ìœ¼ë©´ ì•„ë˜ ì£¼ì„ì„ í’€ë©´ ë¨
  # schedule:
  #   - cron: "10 7 * * *"  # ì˜ˆ: ë§¤ì¼ 16:10 KST (07:10 UTC)

jobs:
  delete-dates:
    runs-on: ubuntu-latest   # ğŸ”´ ì—¬ê¸°! ubuntu-dates â†’ ubuntu-latest ë¡œ ìˆ˜ì •

    steps:
      # 1) repo ì²´í¬ì•„ì›ƒ
      - name: Checkout repo
        uses: actions/checkout@v4

      # 2) Python ì„¸íŒ…
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      # 3) openpyxl ì„¤ì¹˜
      - name: Install dependencies
        run: |
          pip install openpyxl

      # 4) ë‚ ì§œ ì‚­ì œ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
      - name: Run delete_dates script
        run: |
          python _delete_dates.py

      # 5) ë³€ê²½ëœ ì—‘ì…€ íŒŒì¼ ì»¤ë°‹ & í‘¸ì‹œ
      - name: Commit and push changes
        run: |
          git config user.name "github-actions"
          git config user.email "actions@github.com"
          git add _stock_value.xlsx
          git commit -m "Delete latest date from stock workbook" || echo "No changes to commit"
          git push
